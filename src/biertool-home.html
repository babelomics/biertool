<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<dom-module id="biertool-home">
    <style is="custom-style" include="iron-flex iron-flex-reverse iron-flex-alignment iron-flex-factors iron-positioning">
        :host {
            display: block;
            position: relative;
            box-sizing: border-box;
            font-size: 20px;
            /*font-weight: 300;*/
            padding-top: 2vh;
            color: #768187;
        }

        #main {
            margin: 0px auto 0px auto;
            max-width: 785px;
            padding: 2vh;
        }

        #image {
            width: 200px;
            margin: 10px;
        }

        #button {
            font-weight: 400;
            height: auto;
            margin: 20px;
            padding: 20px 30px;
            font-size: 26px;
            border-radius: 5px;
            background-color: var(--dark-button-color);
        }

        #button:hover {
            background-color: var(--light-button-color);
        }

        .application {
            font-size: 70px;
        }

        .description {
            font-size: 24px;
            line-height: 40px;
            padding-top: 30px;
            padding-bottom: 10px;
            text-transform: uppercase;
            text-align: center;
        }

        @media (max-width: 1100px) {
            #image {
                width: 230px;
            }
        }

        @media (max-width: 800px) {
            #image {
                width: 150px;
            }
            .megatitle {
                font-size: 50px;
            }
        }

        .paragraph {
            text-align: justify;
            padding: 10px 0;
        }

        .paragraph2 {
            font-size: 14px;
            padding: 0 0 10px 0;
        }

        .title {
            font-size: 30px;
            padding-top: 30px;
            padding-bottom: 10px;
        }

        .title2 {
            padding-top: 20px;
            padding-bottom: 10px;
        }

        .b {
            font-weight: 400;
        }

        a,
        a:visited {
            text-decoration: none;
        }

        .tutorialBut {
            text-align: center;
            background-color: var(--dark-button-color);
            color: var(--light-primary-color);
            font-weight: 400;
            height: auto;
            margin: 20px;
            padding: 20px 30px;
            font-size: 20px;
            border-radius: 5px;
        }

        .tutorialBut:hover {
            background-color: var(--accent-color);
        }
    </style>
    <template>

        <div id="main">
            <div class="horizontal layout center-justified center">
                <div>
                    <img id="image" src="../images/bier-text.svg">
                </div>
                <div class="vertical layout center">
                    <div class="application vertical layout center">
                        BIER Tool
                    </div>
                    <br>
                    <div class="stv-btn stv-btn-shdw tutorialBut">
                        <a href="https://github.com/babelomics/biertool/wiki/tutorial" target="_blank">
                            <i class="fa fa-compass"></i> &nbsp; Getting Started
                        </a>
                    </div>
                </div>
            </div>

            <div class="title">Overview</div>
            <div class="paragraph">
                Welcome to the gene/variant prioritization tool of the BIER (the Team of BioInformatic for Rare Diseases). This interactive tool allows finding genes affected by deleterious variants that segregate along family pedigrees, case-controls or sporadic samples.
            </div>

            <div class="title2">Supported by</div>
            <div class="paragraph">
                <img style="margin:3px;height:35px;" src="../images/logobier.jpg" />
                <img style="margin:3px;height:35px;" src="../images/logo_ciberer.jpg" />
                <img style="margin:3px;height:35px;" src="../images/logo_cipf.png" />
                <img style="margin:3px;height:35px;" src="../images/logoBabelomics.svg" />
                <img style="margin:3px;height:35px;" src="../images/LOGO_Micinn_Isciii.jpg" />
                <img style="margin:3px;height:35px;" src="../images/logo_inb.png" />
                <img style="margin:3px;height:35px;" src="../images/logo_elixir.jpg" />
            </div>

            <div class="title2">Note:</div>
            <div class="paragraph2">
                <span>{{versionNav}}</span>
                <stv-tooltip type="{{tooltipType}}">{{versionMsg}}</stv-tooltip>
                <br>BierTool web application makes an intensive use of the HTML5 standard and other cutting-edge web technologies such as Web Components, so only modern web browsers are fully supported, these include Chrome 36+, Firefox 32+, IE 10+, Safari 7+ and Opera 24+.
            </div>
        </div>


    </template>
    <script>
        Polymer({
            is: 'biertool-home',
            handleStart: function() {
                this.fire('start');
            },
            annonymousLogin: function() {
                this.fire('annonymous');
            },
            ready: function() {
                this.versionNav = "You are currently using ";
                this.tooltipType = "info";
                this.versionMsg = "Your browser version is suitable for the proper functioning of the tool."
                var nav = navigator.userAgent.toLowerCase();
                if (/opr\/(\d+\.?)+/.test(nav)) {
                    var aux = /opr\/((\d+\.?)+)/.exec(nav);
                    if (aux[1].split(".")[0] < 32) {
                        this.tooltipType = "warn";
                        this.versionMsg = "Your browser version is outdated. The tool may not work properly."
                    } else if (aux[1].split(".")[0] < 24) {
                        this.tooltipType = "error";
                        this.versionMsg = "Your browser version is deprecated. The tool will not work correctly."
                    }
                    this.versionNav += aux[0].replace("opr", "Opera");
                } else if (/firefox\/(\d+\.?)+/.test(nav)) {
                    var aux = /firefox\/((\d+\.?)+)/.exec(nav);
                    if (aux[1].split(".")[0] < 45) {
                        this.tooltipType = "warn";
                        this.versionMsg = "Your browser version is outdated. The tool may not work properly."
                    } else if (aux[1].split(".")[0] < 32) {
                        this.tooltipType = "error";
                        this.versionMsg = "Your browser version is deprecated. The tool will not work correctly."
                    }
                    this.versionNav += aux[0];
                } else if (/msie (\d+\.?)+/.test(nav) || /rv\:(\d+\.?)+/.test(nav)) {
                    var aux = /msie ((\d+\.?)+)/.exec(nav);
                    if (aux == null) {
                        aux = /rv\:((\d+\.?)+)/.exec(nav);
                        this.versionNav += aux[0].replace("rv:", "Internet Explorer");
                    } else {
                        this.versionNav += aux[0].replace("msie", "Internet Explorer");
                    }
                    if (aux[1].split(".")[0] < 11) {
                        this.tooltipType = "warn";
                        this.versionMsg = "Your browser version is outdated. The tool may not work properly."
                    } else if (aux[1].split(".")[0] < 10) {
                        this.tooltipType = "error";
                        this.versionMsg = "Your browser version is deprecated. The tool will not work correctly."
                    }
                } else if (/edge\/(\d+\.?)+/.test(nav)) {
                    var aux = /edge\/((\d+\.?)+)/.exec(nav);
                    if (aux[1].split(".")[0] < 12) {
                        this.tooltipType = "warn";
                        this.versionMsg = "Your browser version is outdated. The tool may not work properly."
                    } else if (aux[1].split(".")[0] < 10) {
                        this.tooltipType = "error";
                        this.versionMsg = "Your browser version is deprecated. The tool will not work correctly."
                    }
                    this.versionNav += aux[0];
                } else if (/safari\/(\d+\.?)+/.test(nav) && nav.indexOf("chrome") == -1) {
                    var aux = /version\/((\d+\.?)+)/.exec(nav);
                    if (aux[1].split(".")[0] < 8) {
                        this.tooltipType = "warn";
                        this.versionMsg = "Your browser version is outdated. The tool may not work properly."
                    } else if (aux[1].split(".")[0] < 7) {
                        this.tooltipType = "error";
                        this.versionMsg = "Your browser version is deprecated. The tool will not work correctly."
                    }
                    this.versionNav += aux[0];
                } else if (/chrome\/(\d+\.?)+/.test(nav)) {
                    var aux = /chrome\/((\d+\.?)+)/.exec(nav);
                    if (aux[1].split(".")[0] < 49) {
                        this.tooltipType = "warn";
                        this.versionMsg = "Your browser version is outdated. The tool may not work properly."
                    } else if (aux[1].split(".")[0] < 36) {
                        this.tooltipType = "error";
                        this.versionMsg = "Your browser version is deprecated. The tool will not work correctly."
                    }
                    this.versionNav += aux[0];
                } else {
                    this.versionNav = "You are currently using an unsupported browser";
                    this.tooltipType = "warn";
                    this.versionMsg = "Your browser may not be compatible with the tool. The tool may not work properly."
                }
                if (nav.indexOf("_64") >= 0) {
                    this.versionNav += " (64-bits)"
                } else if (nav.indexOf("_32") >= 0) {
                    this.versionNav += " (32-bits)"
                }
            }
        })
    </script>
</dom-module>
